import { Block } from './Block';
import { Sprite } from './Sprite';

const colorPallette = [
  '#FFFFFF',  //0,=bg
  '#00ad00',  //1,=pipe color
  '#bdff18',  //2,=highlight
  '#000000',  //3,=shadow
  '#FFFFFF',  //4=not used
  '#FFFFFF',  //5=not used
  '#FFFFFF']; //6=not used

const pipe1 = [
  [3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],
  [3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3],
  [3,1,1,1,1,1,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3],
  [3,2,2,2,1,1,2,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,1,1,2,1,2,1,2,2,3],
  [3,2,2,2,1,1,2,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,1,1,1,2,1,2,2,2,3],
  [3,2,2,2,1,1,2,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,1,1,2,1,2,1,2,2,3],
  [3,2,2,2,1,1,2,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,1,1,1,2,1,2,2,2,3],
  [3,2,2,2,1,1,2,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,1,1,2,1,2,1,2,2,3],
  [3,2,2,2,1,1,2,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,1,1,1,2,1,2,2,2,3],
  [3,2,2,2,1,1,2,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,1,1,2,1,2,1,2,2,3],
  [3,2,2,2,1,1,2,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,1,1,1,2,1,2,2,2,3],
  [3,2,2,2,1,1,2,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,1,1,2,1,2,1,2,2,3],
  [3,2,2,2,1,1,2,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,1,1,1,2,1,2,2,2,3],
  [3,2,2,2,1,1,2,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,1,1,2,1,2,1,2,2,3],
  [3,2,2,2,1,1,2,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,1,1,1,2,1,2,2,2,3],
  [3,2,2,2,1,1,2,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,1,1,2,1,2,1,2,2,3],
  [3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],
  [0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0],
  [0,0,3,2,2,2,1,1,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,2,1,2,2,2,3,0,0],
  [0,0,3,2,2,2,1,1,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,1,2,1,2,2,3,0,0],
  [0,0,3,2,2,2,1,1,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,2,1,2,2,2,3,0,0],
  [0,0,3,2,2,2,1,1,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,1,2,1,2,2,3,0,0],
  [0,0,3,2,2,2,1,1,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,2,1,2,2,2,3,0,0],
  [0,0,3,2,2,2,1,1,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,1,2,1,2,2,3,0,0],
  [0,0,3,2,2,2,1,1,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,2,1,2,2,2,3,0,0],
  [0,0,3,2,2,2,1,1,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,1,2,1,2,2,3,0,0],
  [0,0,3,2,2,2,1,1,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,2,1,2,2,2,3,0,0],
  [0,0,3,2,2,2,1,1,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,1,2,1,2,2,3,0,0],
  [0,0,3,2,2,2,1,1,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,2,1,2,2,2,3,0,0],
  [0,0,3,2,2,2,1,1,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,1,2,1,2,2,3,0,0],
  [0,0,3,2,2,2,1,1,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,2,1,2,2,2,3,0,0],
  [0,0,3,2,2,2,1,1,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,1,2,1,2,2,3,0,0],
  [0,0,3,2,2,2,1,1,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,2,1,2,2,2,3,0,0],
  [0,0,3,2,2,2,1,1,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,1,2,1,2,2,3,0,0],
  [0,0,3,2,2,2,1,1,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,2,1,2,2,2,3,0,0],
  [0,0,3,2,2,2,1,1,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,1,2,1,2,2,3,0,0],
  [0,0,3,2,2,2,1,1,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,2,1,2,2,2,3,0,0],
  [0,0,3,2,2,2,1,1,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,1,2,1,2,2,3,0,0]];

export class StandPipe extends Block {

  constructor(options) {
    super({
      sprites: [
        new Sprite({ context: options.context, dataMaps: [ pipe1 ], x: options.x, y: options.y, colorPallette: colorPallette })] //, frameWidth: 128, frameHeight: 152
    });
  }

  public update (options) {    
    if (this.hasCollided() && this.hasCollidedBottom.length > 0) {
      //BB TODO 1. Animate brick smashing

      //BB TODO 2. Notify subscribers
      // this.notifyParent.emit({ name: "Collision" })
      
      //BB TODO 3. Parent, remove brick from array
    }
    this.bounds.forEach(sprite => { sprite.update(options.vert, options.scroll);   });
  };
}
  